<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cambiar Contraseña - TodoApp</title>
</head>
<body style="font-family: Arial, sans-serif; background: #f7f7f7; margin: 0; padding: 0;">
    <div style="max-width: 400px; margin: 40px auto; background: #fff; border-radius: 8px; box-shadow: 0 2px 8px #eee; padding: 32px;">
        <h2 style="margin: 0 0 18px 0; font-size: 22px; font-weight: 600;">Cambia tu contraseña</h2>
        
        <%= if @error do %>
            <div style="background: #fee; border-left: 4px solid #b91c1c; padding: 12px; margin-bottom: 16px; border-radius: 4px; color: #b91c1c; font-size: 15px;">
                <%= @error %>
            </div>
        <% end %>
        
        <%= if @success do %>
            <div style="background: #d1fae5; border-left: 4px solid #059669; padding: 12px; margin-bottom: 16px; border-radius: 4px; color: #059669; font-size: 15px;">
                <%= @success %>
            </div>
        <% end %>
        
        <%= if !@success do %>
            <form method="post" action={~p"/reset-password"}>
                <input type="hidden" name="_csrf_token" value={Plug.CSRFProtection.get_csrf_token()} />
                <input type="hidden" name="token" value={@token} />
                
                <div style="margin-bottom: 16px;">
                    <label style="display:block; font-size:14px; margin-bottom:6px; font-weight: 500;">Nueva contraseña</label>
                    <input 
                        name="password" 
                        type="password" 
                        minlength="8" 
                        required 
                        autocomplete="new-password"
                        style="width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;" 
                    />
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display:block; font-size:14px; margin-bottom:6px; font-weight: 500;">Confirmar contraseña</label>
                    <input 
                        name="password_confirmation" 
                        type="password" 
                        minlength="8" 
                        required 
                        autocomplete="new-password"
                        style="width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;" 
                    />
                </div>
                
                <button type="submit" style="width:100%;background:#444;color:#fff;padding:12px 0;border:none;border-radius:4px;font-size:16px;font-weight:500;cursor:pointer;">
                    Cambiar contraseña
                </button>
            </form>
        <% end %>
    </div>
</body>
</html>
